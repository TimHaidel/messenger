добавить колонку user_group.users_count
менять значение при измении количества юзеров в группе

-------------------
select group_id
from user_group ug 
join user_2_group u2g on u2g.group_id=ug.id 
where (u2g.user_id=2 or u2g.user_id=3) and ug.users_count=2
group by group_id
having count(1)=2

использовать  nativeQuery
https://thoughts-on-java.org/jpa-native-queries/


